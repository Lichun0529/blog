(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{766:function(t,s,e){t.exports=e.p+"assets/img/CreateChromeExtensionsWithVue-1.ab39604f.png"},834:function(t,s,e){"use strict";e.r(s);var a=e(97),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"如何使用vue-js开发chrome插件？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何使用vue-js开发chrome插件？"}},[t._v("#")]),t._v(" 如何使用Vue.js开发Chrome插件？")]),t._v(" "),a("p",[t._v("本文以我的项目为例介绍了使用Vue.js代替原生JS开发Chrome扩展，及一些注意事项。项目地址：https://github.com/Lichun0529/QuickSearch-chrome")]),t._v(" "),a("h3",{attrs:{id:"如何开发chrome扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何开发chrome扩展"}},[t._v("#")]),t._v(" 如何开发Chrome扩展")]),t._v(" "),a("p",[t._v("与Web开发类似，Chrome扩展也是由HTML+JS+CSS构成，点击拓展图标弹出的拓展功能页面是一个popup.html文件，在文件内可以引入CSS和JS，只需添加一个manifest配置文件就可以使扩展运行起来，参考《Chrome扩展及应用开发（首发版）》。")]),t._v(" "),a("h3",{attrs:{id:"为什么使用vue？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么使用vue？"}},[t._v("#")]),t._v(" 为什么使用Vue？")]),t._v(" "),a("p",[t._v("popup.html文件内可以在"),a("code",[t._v("<style>")]),t._v("编写CSS代码，但是不支持在"),a("code",[t._v("<script>")]),t._v("标签中编写JS代码，JS代码必须由外部引入。因此使用Vue.js可以实现在一个文件内同时写HTML+JS+CSS，同时解决了频繁操作DOM的问题，提升了开发效率。")]),t._v(" "),a("h3",{attrs:{id:"一些注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一些注意事项"}},[t._v("#")]),t._v(" 一些注意事项")]),t._v(" "),a("ol",[a("li",[t._v("想使用Vue需要先配置CSP，详见"),a("a",{attrs:{target:"_blank",href:"https://www.cnblogs.com/smartXiang/p/6929617.html"}},[t._v("https://www.cnblogs.com/smartXiang/p/6929617.html")])]),t._v(" "),a("li",[t._v("为防止XSS攻击JSONP被浏览器CSP限制，如需跨域需要配置manifest.json文件，"),a("a",{attrs:{target:"_blank",href:"https://www.ituring.com.cn/book/miniarticle/60221"}},[t._v("详见《Chrome扩展及应用开发（首发版）》中关于跨域的章节。")])]),t._v(" "),a("li",[t._v("作为web应用在本地调试和作为浏览器扩展在Chrome运行时请求接口方法、返回值格式不同。")])]),t._v(" "),a("h3",{attrs:{id:"功能设想"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能设想"}},[t._v("#")]),t._v(" 功能设想")]),t._v(" "),a("img",{staticClass:"zoom",attrs:{src:e(766)}}),t._v(" "),a("h3",{attrs:{id:"项目框架搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目框架搭建"}},[t._v("#")]),t._v(" 项目框架搭建")]),t._v(" "),a("p",[t._v("详见"),a("a",{staticStyle:{"font-size":"14px"},attrs:{href:"./CreateVueProjectFromZero",target:"_blank"}},[t._v("《如何不借助脚手架从零搭建Vue项目》")]),t._v("这篇文章或者使用vue-cli搭建vue项目框架。搭建完毕后打包项目，默认打包完目录为dist。")]),t._v(" "),a("h3",{attrs:{id:"性能优化建议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能优化建议"}},[t._v("#")]),t._v(" 性能优化建议")]),t._v(" "),a("ul",[a("li",[t._v("使用webpack打包、压缩代码。")]),t._v(" "),a("li",[t._v("尽量不在"),a("code",[t._v("<head>")]),t._v("中使用"),a("code",[t._v("<link>")]),t._v("和"),a("code",[t._v("<script>")]),t._v("引入文件以减少加载页面时发送的请求数。")])]),t._v(" "),a("h3",{attrs:{id:"创建配置文件manifest-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建配置文件manifest-json"}},[t._v("#")]),t._v(" 创建配置文件manifest.json")]),t._v(" "),a("p",[t._v("在项目打包后的根目录下创建manifest.json文件")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"manifest_version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//必填，且必须为2")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我的第一个Chrome扩展"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//扩展名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我的第一个Chrome扩展"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//扩展描述")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icons"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//不同尺寸图标")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"16"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"images/icon16.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"48"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"images/icon48.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"128"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"images/icon128.png"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"browser_action"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default_icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"19"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"images/icon19.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"38"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"images/icon38.png"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default_title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我的第一个Chrome扩展"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//默认标题")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default_popup"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.html"')]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//扩展主界面文件名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content_security_policy"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"script-src 'self' 'unsafe-eval'; object-src 'self'\"")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用vue开发必须添加此配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br")])]),a("h3",{attrs:{id:"使用扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用扩展"}},[t._v("#")]),t._v(" 使用扩展")]),t._v(" "),a("ol",[a("li",[t._v("打开Chrome设置界面")]),t._v(" "),a("li",[t._v("点击左侧下方扩展程序")]),t._v(" "),a("li",[t._v("打开右上角“开发者模式”开关")]),t._v(" "),a("li",[t._v("点击左上角“加载已解压的扩展程序”")]),t._v(" "),a("li",[t._v("选择dist目录")]),t._v(" "),a("li",[t._v("点击地址栏右侧新增的扩展图标")])]),t._v(" "),a("h3",{attrs:{id:"踩坑记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#踩坑记录"}},[t._v("#")]),t._v(" 踩坑记录")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("- 1. vue runtime-only错误\n\n  vue.runtime.esm.js:620 [Vue warn]: You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.\n  \n  (found in <Root>)\n\n\t- 原因\n\n\t\t- 查找规则不同，网页中使用scrip标签导入的vue指向的是dist/vue.js，而使用import引入的vue指向的是dist/vue.runtime.common.js（严格版）\n\n\t- 解决方法\n\n\t\t- 方法一：不使用自动查找，直接指定路径：../node_modules/vue/dist/vue\n\t\t- 方法二：webpack配置文件中resolve节点下修改查找规则\n\n\t- 引申：import包查找规则（vue为例）\n\n\t\t- 1.查找根目录中有没有node_modules文件夹\n\t\t- 2.根据包名在node_modules中找到vue文件夹\n\t\t- 3.找到vue中packa.json文件\n\t\t- 4.在package.json中找到main节点对应的路径，路径指向的文件就是入口文件\n\n- 2. 无法引入.vue文件\n\n\t- 原因\n\n\t\t- webpack默认只能打包.js文件\n\n\t- 解决方法\n\n\t\t- 安装vue-loader和vue-template-compiler\n\n\t- 引申：loader调用过程\n\n\t\t- 1. 先拿到引入文件后缀名\n\t\t- 2. 在webpack.config.js中module节点下查找匹配规则，如果能找到则调用匹配规则进行处理，找不到则报错,多个loader时，由后向前调用\n\t\t- 3. 所有loader调用完毕将结果交给webpack打包合并，最终输出到出口js中\n\n- 3. 中无法引入.css文件\n\n\t- 原因\n\n\t\t- 同上\n\n\t- 解决方法\n\n\t\t- 安装css-loader和style-loader\n\n- 4. 打包完dist目录下index.html文件报错\n\n  Failed to load resource: net::ERR_FILE_NOT_FOUND\n\n\t- 原因\n\n\t\t- 未知\n\n\t- 解决方法\n\n\t\t- 删除webpack配置out节点下的publicPath\n\n- 5. 拓展添加到浏览器后报错 ：Uncaught EvalError\n\n  Uncaught EvalError: Refused to evaluate a string as JavaScript because 'unsafe-eval' is not an allowed source of script in the following Content Security Policy directive: \"script-src 'self' blob: filesystem:\".\n\n\t- 配置CSP\n\n- 6. 引入Bootstrap时Error: Can't resolve 'popper.js'\n\n\t- 手动安装popper.js\n\n- 7.  npm i bootstrap默认安装最新版bootstrap\n")])])]),a("h3",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.webpackjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.ituring.com.cn/book/1421",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chrome扩展及应用开发（首发版）"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://crxdoc-zh.appspot.com/extensions/getstarted",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chrome扩展非官方中文版文档"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developer.chrome.com/extensions",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chrome扩展官方文档"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://cn.vuejs.org/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue.js官方文档"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/lavyun/Easy-todo",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用Vue.js开发的扩展案例"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);