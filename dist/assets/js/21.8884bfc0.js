(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{834:function(s,t,e){"use strict";e.r(t);var a=e(97),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"chrome扩展如何跨域？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#chrome扩展如何跨域？"}},[s._v("#")]),s._v(" Chrome扩展如何跨域？")]),s._v(" "),e("p",[s._v("错误1：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("index.html:1 Access to XMLHttpRequest at 'https://www.baidu.com/sugrec?pre=1&p=3&ie=utf-8&json=1&prod=pc&from=pc_web&wd=1' from origin 'chrome-extension://cgdmfadaikmdlhjdocfclialdjpeebdn' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("错误2：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Refused to load the script 'https://www.baidu.com/sugrec?pre=1&p=3&ie=utf-8&json=1&prod=pc&from=pc_web&wd=1&cb=jsonCallBack' because it violates the following Content Security Policy directive: \"script-src 'self' 'unsafe-eval'\". Note that 'script-src-elem' was not explicitly set, so 'script-src' is used as a fallback.\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("开发扩展过程中需要用到一个百度的接口，本地调试阶段使用get请求出现跨域问题，改用JSONP请求后问题解决。把扩展装入Chrome中后运行发现出现错误2，查阅资料后发现原因在于Chrome为防止XSS攻击应用了CSP,导致JSONP无法使用。换回get方法后发送请求出现错误1。")]),s._v(" "),e("h3",{attrs:{id:"解决方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[s._v("#")]),s._v(" 解决方法")]),s._v(" "),e("p",[s._v("对于网站来说，浏览器出于安全考虑是不允许跨域，但这个规则如果同样限制Chrome扩展应用，就会使其能力大打折扣，所以Google允许Chrome扩展应用不必受限于跨域限制。但出于安全考虑，需要在Manifest的permissions属性中声明需要跨域的权限。")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"permissions"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*://*.wikipedia.org/*"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//仅wiki域名")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://*/"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//所有hppts协议下域名")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://*/"')]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//所有hppt协议下域名")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("blockquote",[e("p",[s._v("CSP（Content Security Policy），内容安全策略。CSP 通常是在 header 或者 HTML 的 meta 标签中定义的，它声明了一系列可以被当前网页合法引用的资源，如果不在 CSP 声明的合法范围内，浏览器会拒绝引用这些资源。")])])])}),[],!1,null,null,null);t.default=n.exports}}]);